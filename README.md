# Garbage_Sorting_Project (쓰레기 분류 프로젝트)

## 1. Purpose

기술이 발전함에 따라 일회용 쓰레기 및 다양한 종류의 쓰레기가 발생하고 있다. 이러한 쓰레기의 증가로 인해 재활용이 어려워지고 있다. 현재 우리나라에서는 개인이 쓰레기를 분리 배출하도록 되어 있으나, 분류 과정에서 불편함을 느껴 제대로 분리하지 않고 버리는 경우가 많다. 이 문제를 어떻게 해결할 수 있을까?

## 2. Solution

개인이 쓰레기를 종류에 상관없이 배출했을 때, 이를 자동으로 분류해주는 시스템을 도입하면 분리수거가 되지 않는 문제를 해결할 수 있을 것이다. 그렇다면 이러한 자동 분류는 어떻게 이루어져야 할까?

### 2_1. 쓰레기를 받기 위한 컨베이어 시스템

컨베이어 시스템을 실제로 구성하기 위해서는 2개의 강력한 DC 모터가 필요하다. 하지만 이러한 모터는 가격이 비싸므로, 작은 모터 2개를 PVC 파이프에 연결한 후 벨트로 PVC 파이프를 연결해 컨베이어 벨트를 제작할 것이다. 초음파 센서를 사용해 물체가 올라간 것을 감지하고, 카메라로 촬영할 위치까지 벨트를 이동시킨다.

### 2_2. 쓰레기 종류를 판별하는 학습 모델

분류는 CNN 모델을 이용한다.

[GitHub Repository: Waste Classification](https://github.com/standfsk/waste_classification)

해당 모델을 AI 허브에 있는 생활 폐기물 이미지 데이터셋으로 학습시킨다.

[AI Hub Data](https://www.aihub.or.kr/aihubdata/data/view.do?currMenu=&topMenu=&aihubDataSe=data&dataSetSn=140)

331GB의 데이터를 모두 사용하기에는 시간이 많이 소요되므로 데이터 수를 줄이고, Epoch 수를 늘리는 방안을 택한다. 데이터셋은 train_set 80%, test_set 10% validation_set 10%로 사용하며, 결과에 따라 유동적으로 변경할 수 있다.

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/c8ccacdc-a929-4b2c-92ec-a84d8e3c9b75/6750bb06-d646-42ca-8143-8bbb6383b402/image.png)

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/c8ccacdc-a929-4b2c-92ec-a84d8e3c9b75/6c2adbae-916a-458d-9f91-81afa1f64935/46329bca-f339-4b27-9665-97586cae34c4.png)

해당 데이터 셋은 위와 같은 쓰레기 이미지 파일과 해당 이미지 파일에 대한 라벨링 정보가 기록되어 있다.

```jsx
{
  "FILE NAME": "11_X001_C024_1218_0.jpg",
  "COLLECTION METHOD": "제작자료",
  "FORM": "이미지",
  "DATE": "2020-12-18 11:32:55",
  "GPS": "37.4944062388889/126.732904033333",
  "ID CODE": "C024",
  "RESOLUTION": "1920*1080",
  "focus distance": "4.30mm",
  "exposure time": "1/60sec",
  "Aperture values": "2.52",
  "Sensitivity iso": "50",
  "exposure method": "normal program",
  "MAKE": "samsung",
  "Camera Model Name": "SM-G965N",
  "Software": "G965NKSU3FTJ2",
  "File Size": "299009",
  "DAY/NIGHT": "주간",
  "PLACE": "실외",
  "PROJECT SORTING": "생활폐기물",
  "BoundingCount": "1",
  "Bounding": [
    {
      "CLASS": "가구류",
      "DETAILS": "밥상",
      "DAMAGE": "원형",
      "TRANSPARENCY": "불투명",
      "Color": "103/86/80",
      "Shape": "다면체",
      "Texture": "딱딱함",
      "Object Size": "중",
      "Direction": "뒷면",
      "Drawing": "BOX",
      "x1": "239",
      "y1": "65",
      "x2": "1216",
      "y2": "983"
    }
  ]
}
```

라벨링 파일은 위와 같은 json 형식의 파일로 존재한다.

### 2_3. 쓰레기 분류 방식

결정된 결과에 따라 쓰레기를 이동시켜 분류한다. 이를 위한 두 가지 방법이 있다.

### Sol1. 리니어 액추에이터를 이용한 분류

- **장점**
    1. 강력한 힘: 무거운 쓰레기를 분류하는 데 유리하다.
    2. 정확한 직선 운동: 쓰레기를 일정한 방향으로 밀거나 이동시킬 수 있다.
    3. 내구성: 물리적 충격에 강하며, 오래 사용할 수 있다.
    4. 안정적인 작동: 부하가 걸려도 안정적으로 작동할 수 있어 다양한 쓰레기를 처리하는 데 유리하다.
- **단점**
    1. 비용: 리니어 액추에이터는 상대적으로 비싸고, 더 복잡한 시스템이 필요할 수 있다.
    2. 속도: 동작 속도가 느려 대량의 쓰레기를 빠르게 분류하기 어려울 수 있다.
    3. 복잡한 설치: 설치가 더 복잡하고 관리도 까다로울 수 있다.

### Sol2. 서보 모터를 이용한 분류

- **장점**
    1. 정밀 제어: 각도와 위치를 매우 정확하게 제어할 수 있어 세밀한 분류 작업에 적합하다.
    2. 유연성: 다양한 동작 패턴을 지원하며, 필요한 위치에 정확한 움직임을 제공한다.
    3. 속도: 동작 속도가 빠르며, 쓰레기를 신속하게 분류할 수 있다.
    4. 비용: 상대적으로 저렴하고 경제적이다.
- **단점**
    1. 힘의 제한: 무거운 쓰레기를 처리하는 데는 적합하지 않다.
    2. 제한된 움직임: 회전 운동만 가능하므로 직선 운동에는 추가 메커니즘이 필요할 수 있다.
    3. 내구성 문제: 과부하 시 내구성이 떨어질 수 있다.

## 3. Using Sensor and Actuator

### 1. 초음파 센서(Ultrasonic Sensor)

### 1) 기능

초음파 센서는 물체와의 거리를 측정하는 센서로, 초음파를 송출한 후 반사되어 돌아오는 신호의 시간을 측정하여 거리를 계산한다. 주로 로봇, 자동차 후방 센서, 물체 감지 및 거리 측정 용도로 사용된다.

### 2) 특징

- 비접촉식 거리 측정: 물리적으로 접촉하지 않고도 물체와의 거리를 측정할 수 있음.
- 고정밀 측정: 짧은 거리에서 높은 정밀도를 제공하며, 거리가 멀어질수록 정확도는 약간 떨어질 수 있음.
- 환경 의존성: 물체의 재질이나 모양, 주변 환경(온도, 습도 등)에 영향을 받을 수 있음.
- 다양한 응용: 물체 감지, 충돌 방지, 거리 측정, 액체 레벨 측정 등 다양한 용도로 사용됨.
- 내구성: 먼지, 습기 등 외부 환경에 영향을 덜 받음.

### 3) 종류

- 1차원 초음파 센서: 거리 측정에 주로 사용되며, 일정한 방향으로 초음파를 송출하고 반사파를 감지해 거리를 계산함.
- 2차원 초음파 센서: 초음파를 여러 방향으로 송출하여 면적 내 물체를 감지하는 데 사용됨.
- 초음파 어레이 센서: 여러 개의 초음파 송신기와 수신기를 배열하여 보다 넓은 영역에서의 물체 감지 및 위치 확인에 사용됨.

### 2. DC 모터(DC Mortor)

### 1) 기능

DC 모터는 직류 전원을 통해 회전 운동을 발생시키는 모터로, 주로 로봇, 가전제품, 차량 등에서 회전 동력을 제공하는 데 사용된다. 전류의 크기와 방향을 조절하여 회전 속도와 방향을 제어할 수 있다.

### 2) 특징

- 단순한 제어: 직류 전원으로 간단히 구동할 수 있으며, 속도와 방향을 쉽게 제어할 수 있음.
- 고속 회전: DC 모터는 높은 회전 속도를 제공할 수 있어 빠른 구동이 필요한 장비에 적합함.
- 저렴한 비용: 상대적으로 저렴한 가격에 제작되며, 다양한 크기와 형태로 제공됨.
- 유지보수 필요: 브러시가 있는 유형의 DC 모터는 마모로 인해 정기적인 유지보수가 필요함.
- 광범위한 응용: 로봇, 전기 자동차, 드론, 산업 기계 등 다양한 분야에서 사용됨.

### 3) 종류

- 브러시드 DC 모터: 회전자의 방향을 전환하기 위해 브러시가 사용되는 전통적인 DC 모터.
- 브러시리스 DC 모터: 전기적으로 회전자의 방향을 제어하여 브러시 없이도 구동이 가능하며, 내구성과 효율성이 높음.

### 3. 카메라 모듈(Camera Module)

### 4. 리니어 액츄에이터(Linear Actuator)

### 1) 기능

리니어 액츄에이터는 회전 운동을 직선 운동으로 변환하여 물체를 직선 방향으로 이동시키는 장치로, 주로 산업 기계, 자동화 시스템, 가구 등에 사용된다.

### 2) 특징

- 정밀한 직선 운동: 물체를 정확하게 직선 방향으로 이동시킬 수 있음.
- 간단한 제어: 전자 제어로 움직임을 쉽게 제어할 수 있음.
- 강력한 힘: 상대적으로 높은 힘을 제공하여 무거운 물체의 이동이 가능함.
- 유지보수 간편: 기계적 설계가 단순하여 유지보수가 용이함.
- 다양한 응용: 산업용 로봇, 창문 개폐 시스템, 조정 가능한 책상 등 다양한 분야에 사용됨.

### 3) 종류

- 전기식 리니어 액츄에이터: 전기 모터를 사용하여 직선 운동을 발생시키며, 주로 가정용 및 산업용에서 사용됨.
- 유압식 리니어 액츄에이터: 유체 압력을 사용하여 강력한 직선 운동을 발생시키며, 주로 무거운 장비에서 사용됨.
- 공압식 리니어 액츄에이터: 압축 공기를 사용하여 빠른 직선 운동을 발생시키며, 주로 경량 작업에서 사용됨.

### 5. 서보 모터(Servo Motor)

### 1) 기능

서보 모터는 특정한 각도 또는 위치를 정밀하게 제어할 수 있는 모터로, 주로 로봇, 자동화 기계, 드론, RC 차량 등에 사용된다. 외부 입력 신호에 따라 회전 각도를 정확하게 제어할 수 있다.

### 2) 특징

- 정밀한 위치 제어: 모터의 회전 각도를 정밀하게 제어할 수 있음.
- 빠른 반응 속도: 신속하게 명령에 따라 움직임을 조정할 수 있음.
- 피드백 시스템: 내장된 센서를 통해 모터의 실제 위치를 감지하여 정확한 위치 제어를 보장함.
- 소형 및 경량: 크기가 작고 가벼워 다양한 응용에 쉽게 통합될 수 있음.
- 고효율: 에너지를 효율적으로 사용하여 배터리 수명을 연장시킴.

### 3) 종류

- AC 서보 모터: 교류 전원을 사용하여 구동하며, 주로 산업 기계 및 로봇에 사용됨.
- DC 서보 모터: 직류 전원을 사용하여 구동하며, 소형 로봇이나 드론 등에서 많이 사용됨.

### 6. LCD (Liquid Crystal Display)

### 1) 기능

LCD(Liquid Crystal Display)는 전자 장치에서 시각적 정보를 표시하는 화면 장치로, 전압의 변화를 이용해 액정의 배열을 조정하여 빛의 투과를 제어한다. 주로 텍스트, 이미지, 또는 비디오를 표시하는 데 사용되며, 쓰레기 분류 시스템에서는 판별된 쓰레기의 종류나 현재 상태 정보를 실시간으로 사용자에게 제공하는 데 활용된다.

### 2) 특징

- 저전력 소비: 액정은 빛을 자체적으로 생성하지 않고 외부 광원을 이용하므로, 에너지를 절약하면서도 고화질을 제공할 수 있다.
- 경량 및 슬림 디자인: LCD는 얇고 가벼워서 공간 절약이 가능하며, 다양한 전자 장치에 통합하기 쉽다.
- 고해상도: 선명한 이미지와 텍스트를 제공하며, 다양한 색상을 표현할 수 있어 직관적인 정보를 제공한다.
- 넓은 응용 범위: 산업 장비, 가전제품, 자동차 디스플레이 등 다양한 분야에서 사용되며, 쓰레기 분류 시스템에서는 센서 데이터나 분류 결과를 실시간으로 표시하는 데 사용된다.

### 3) 종류

- 문자형 LCD: 주로 텍스트나 숫자를 표시하는 데 사용되며, 간단한 정보를 표시하는 데 적합하다.
- 그래픽 LCD: 텍스트뿐만 아니라 이미지와 그래픽을 표시할 수 있어 더 복잡한 정보를 제공하는 데 유리하다.
- TFT LCD (Thin-Film Transistor LCD): 고속 응답성과 뛰어난 색상 표현을 자랑하는 LCD로, 고해상도 이미지를 필요로 하는 애플리케이션에 적합하다.

### 7. LED (Light Emitting Diode)

### 1) 기능

LED(Light Emitting Diode)는 전기를 빛으로 변환하는 반도체 소자로, 매우 적은 전력으로도 밝은 빛을 낼 수 있다. 쓰레기 분류 시스템에서는 분류 상태나 시스템 상태를 시각적으로 표시하기 위해 사용될 수 있다. 예를 들어, 특정 쓰레기가 올바르게 분류되었을 때, 특정 색상의 LED가 켜져 사용자에게 상태를 알리는 데 사용할 수 있다.

### 2) 특징

- 저전력 소비: LED는 전력을 적게 소모하면서도 밝은 빛을 제공할 수 있어 에너지 효율적이다.
- 긴 수명: 일반적으로 수명이 길고, 지속적으로 사용할 수 있어 유지보수 비용이 적게 든다.
- 빠른 응답 속도: LED는 매우 빠르게 켜고 끌 수 있어 실시간으로 상태 변화를 즉각적으로 알릴 수 있다.
- 다양한 색상 표현: 빨간색, 녹색, 파란색 등 다양한 색상의 LED를 사용해 상태별로 시각적인 피드백을 제공할 수 있다.
- 내구성: LED는 물리적 충격에 강하고, 다양한 환경에서도 안정적으로 작동한다.

### 3) 종류

- 단일색 LED: 하나의 색상만을 표시하는 LED로, 상태를 간단하게 시각적으로 구분할 때 사용된다. 예를 들어, 정상 작동 시 녹색, 오류 발생 시 빨간색 LED를 켜는 방식으로 상태를 표현할 수 있다.
- RGB LED: 빨강, 초록, 파랑 세 가지 색상의 조합을 통해 다양한 색상을 표현할 수 있는 LED로, 더 복잡한 상태 정보를 시각적으로 표현하는 데 유용하다.
- 고휘도 LED: 매우 밝은 빛을 내는 LED로, 야외나 밝은 환경에서도 쉽게 시각적으로 상태를 확인할 수 있다.

## 4. Algorithm

### 1) 컨베이어 시스템

1. 컨베이어 벨트위에 물체가 올라온 것을 초음파 센서를 통해 알아낸다
2. 만약 초음파 센서에 물체가 감지된다면, 컴베이어 벨트를 작동시킨다
3. 컨베이어 벨트를 타고 물체가 이동하여 카메라 모듈 아래에 물체가 위치한 것을 초음파 센서로 알아낸다.
4. 카메라 모듈 아래에 위치한다면, 컨베이어 벨트를 멈춘다

### 2) 분류 모델 학습

1. GitHub 저장소를 클론한다
    
    ```bash
    git clone <https://github.com/standfsk/waste_classification.git>
    cd waste_classification
    ```
    
2. 필요한 패키지를 설치한다
    
    ```bash
    pip install -r requirements.txt
    ```
    
3. 모델 학습을 위해 `train.py` 스크립트를 실행한다
    
    ```bash
    python train.py
    ```
    

### 3) 쓰레기 종류 파악 시스템

1. 카메라 모듈로 물체의 사진을 얻는다
2. 해당 사진을 분류 모델에 넣는다
3. 결과를 받아 lcd에 출력한다

### 4) 쓰레기 분류 시스템

1. 결정된 쓰레기의 종류에 따라 서보 모터의 각도를 다르게 조절한다(ex) 30, 60, 90, 120)
2. 서보 모터의 작동이 끝난 이후, 컨베이어 벨트를 일정시간 작동시켜 쓰레기를 분류한다
3. 일정 시간이 끝난 후, 설비 밖에 있는 LED를 빨간색에서 초록색으로 바꾼다. (작동중에는 빨간색)
